{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"외부 주문 연동","description":"외부 시스템과 주문 연동 처리"},{"name":"주문","description":"주문 및 결제 관련 API"},{"name":"포인트","description":"포인트 충전 및 사용 관련 API"},{"name":"상품","description":"상품 관련 API"},{"name":"Coupon","description":"쿠폰 관련 API"}],"paths":{"/mock/users/{userId}/coupons":{"get":{"tags":["Coupon"],"summary":"보유 쿠폰 목록 조회","description":"사용자가 보유한 전체 쿠폰 목록을 조회한다.","operationId":"getUserCoupons","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"쿠폰 목록 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiListIssuedCouponResponseDto"}}}},"404":{"description":"사용자 없음","content":{"application/json":{"examples":{"사용자 없음 실패 예시":{"description":"사용자 없음 실패 예시","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}},"post":{"tags":["Coupon"],"summary":"선착순 쿠폰 발급","description":"요청한 쿠폰 정책에 대해 사용자가 쿠폰을 발급받는다.","operationId":"issueCoupon","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IssueCouponRequestDto"}}},"required":true},"responses":{"200":{"description":"쿠폰 발급 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiIssuedCouponResponseDto"}}}},"400":{"description":"발급 불가 (중복, 수량 초과 등)","content":{"application/json":{"examples":{"중복 발급 실패 예시":{"description":"중복 발급 실패 예시","value":{"success":false,"message":"이미 발급된 쿠폰입니다.","data":null,"status":400}}}}}},"404":{"description":"사용자 또는 쿠폰 정책 없음","content":{"application/json":{"examples":{"사용자 없음 실패 예시":{"description":"사용자 없음 실패 예시","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/orders":{"post":{"tags":["주문"],"summary":"주문 요청","description":"사용자가 하나 이상의 상품을 주문합니다.","operationId":"createOrder","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderRequestDto"},"example":{"userId":1,"items":[{"productId":1,"item_cnt":2},{"productId":2,"item_cnt":1}],"couponId":5}}},"required":true},"responses":{"200":{"description":"주문 완료","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiOrderSummaryResponseDto"}}}},"400":{"description":"상품 재고/포인트/쿠폰 문제","content":{"application/json":{"examples":{"포인트 부족":{"description":"포인트 부족","value":{"success":false,"message":"보유 포인트가 부족합니다.","data":null,"status":400}}}}}},"404":{"description":"사용자 또는 상품 없음","content":{"application/json":{"examples":{"사용자 없음":{"description":"사용자 없음","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/external/orders":{"post":{"tags":["외부 주문 연동"],"summary":"주문 완료 후 외부 시스템 전송","description":"주문 완료 후 외부 시스템(Mock API)으로 주문 정보를 전달합니다.","operationId":"sendOrderToExternal","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExternalOrderRequestDto"},"examples":{"성공 예시":{"description":"성공 예시","value":{"orderId":100,"userId":1,"totalAmount":18000,"status":"SUCCESS","reason":null,"items":[{"productId":1,"item_cnt":2},{"productId":2,"item_cnt":1}]}}}}},"required":true},"responses":{"200":{"description":"외부 시스템 처리 완료","content":{"application/json":{"examples":{"성공 응답 예시":{"description":"성공 응답 예시","value":{"success":true,"message":"외부 시스템 처리 완료","data":null,"status":200}}}}}},"500":{"description":"외부 시스템 오류","content":{"application/json":{"examples":{"실패 응답 예시":{"description":"실패 응답 예시","value":{"success":false,"message":"외부 시스템 오류: 재고 부족","data":null,"status":500}}}}}}}}},"/mock/users/{userId}/points/use":{"patch":{"tags":["포인트"],"summary":"포인트 사용","description":"사용자의 포인트를 특정 금액만큼 차감합니다.","operationId":"usePoint","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PointUpdateRequestDto"},"example":{"amount":1000}}},"required":true},"responses":{"200":{"description":"포인트 사용 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiPointBalanceResponseDto"}}}},"400":{"description":"포인트 부족","content":{"application/json":{"examples":{"포인트 부족 예시":{"description":"포인트 부족 예시","value":{"success":false,"message":"보유 포인트가 부족합니다.","data":null,"status":400}}}}}},"404":{"description":"사용자 없음","content":{"application/json":{"examples":{"사용자 없음 예시":{"description":"사용자 없음 예시","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/users/{userId}/points/charge":{"patch":{"tags":["포인트"],"summary":"포인트 충전","description":"사용자의 포인트를 특정 금액만큼 충전합니다.","operationId":"chargePoint","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PointUpdateRequestDto"},"example":{"amount":1000}}},"required":true},"responses":{"200":{"description":"충전 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiPointBalanceResponseDto"}}}},"400":{"description":"0원 이하 충전 불가","content":{"application/json":{"examples":{"0원 충전 실패 예시":{"description":"0원 충전 실패 예시","value":{"success":false,"message":"충전 금액은 0원 이상이어야 합니다.","data":null,"status":400}}}}}},"404":{"description":"사용자 없음","content":{"application/json":{"examples":{"사용자 없음 예시":{"description":"사용자 없음 예시","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/users/{userId}/points/history":{"get":{"tags":["포인트"],"summary":"포인트 사용 이력 조회","description":"사용자의 포인트 충전/사용 내역을 조회합니다.","operationId":"getPointHistory","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"이력 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiListPointHistoryDto"}}}},"404":{"description":"사용자 없음","content":{"application/json":{"examples":{"사용자 없음 예시":{"description":"사용자 없음 예시","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/users/{userId}/points/balance":{"get":{"tags":["포인트"],"summary":"포인트 잔액 조회","description":"사용자의 현재 보유 포인트를 조회합니다.","operationId":"getPointBalance","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"잔액 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiPointBalanceResponseDto"}}}},"404":{"description":"사용자 없음","content":{"application/json":{"examples":{"사용자 없음 예시":{"description":"사용자 없음 예시","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/users/{userId}/orders":{"get":{"tags":["주문"],"summary":"사용자 주문 내역 조회","description":"특정 사용자의 전체 주문 이력을 조회합니다.","operationId":"getUserOrders","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiListUserOrderSummaryDto"}}}},"404":{"description":"사용자 없음","content":{"application/json":{"examples":{"사용자 없음 예시":{"description":"사용자 없음 예시","value":{"success":false,"message":"사용자를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/users/{userId}/coupons/{couponId}/available":{"get":{"tags":["Coupon"],"summary":"쿠폰 사용 가능 여부 조회","description":"특정 사용자가 특정 쿠폰을 사용할 수 있는지 확인한다.","operationId":"checkCouponAvailable","parameters":[{"name":"userId","in":"path","description":"사용자 ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"couponId","in":"path","description":"쿠폰 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"쿠폰 사용 가능","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiCouponAvailableResponseDto"}}}},"400":{"description":"쿠폰 사용 불가 (만료, 이미 사용됨 등)","content":{"application/json":{"examples":{"쿠폰 사용 불가 예시":{"description":"쿠폰 사용 불가 예시","value":{"success":false,"message":"이미 사용된 쿠폰입니다.","data":null,"status":400}}}}}}}}},"/mock/products":{"get":{"tags":["상품"],"summary":"전체 상품 조회","description":"판매 중인 전체 상품 목록을 조회합니다.","operationId":"getAllProducts","responses":{"200":{"description":"상품 목록 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiListProductResponseDto"}}}}}}},"/mock/products/{productId}":{"get":{"tags":["상품"],"summary":"상품 상세 조회","description":"특정 상품 ID에 대한 상세 정보를 조회합니다.","operationId":"getProductDetail","parameters":[{"name":"productId","in":"path","description":"상품 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"상품 상세 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiProductResponseDto"}}}},"404":{"description":"상품을 찾을 수 없음","content":{"application/json":{"examples":{"상품 없음 예시":{"description":"상품 없음 예시","value":{"success":false,"message":"해당 상품을 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/products/popular":{"get":{"tags":["상품"],"summary":"인기 상품 조회","description":"지정한 기간 내 많이 판매된 인기 상품을 조회합니다.","operationId":"getPopularProducts","parameters":[{"name":"days","in":"query","description":"조회 대상 기간 (일 단위)","required":true,"schema":{"type":"integer","format":"int32"},"example":3},{"name":"limit","in":"query","description":"조회할 상품 수","required":true,"schema":{"type":"integer","format":"int32"},"example":5}],"responses":{"200":{"description":"인기 상품 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiListPopularProductDto"}}}}}}},"/mock/orders/{orderId}":{"get":{"tags":["주문"],"summary":"주문 상세 조회","description":"특정 주문 ID에 대한 상세 정보를 조회합니다.","operationId":"getOrderDetail","parameters":[{"name":"orderId","in":"path","description":"주문 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiOrderDetailDto"}}}},"404":{"description":"주문 없음","content":{"application/json":{"examples":{"주문 없음 예시":{"description":"주문 없음 예시","value":{"success":false,"message":"주문을 찾을 수 없습니다.","data":null,"status":404}}}}}}}}},"/mock/orders/{orderId}/payment":{"get":{"tags":["주문"],"summary":"결제 내역 조회","description":"주문 ID에 대한 결제 내역을 조회합니다.","operationId":"getOrderPayment","parameters":[{"name":"orderId","in":"path","description":"주문 ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseApiOrderPaymentDto"}}}},"404":{"description":"주문 없음","content":{"application/json":{"examples":{"결제 내역 없음 예시":{"description":"결제 내역 없음 예시","value":{"success":false,"message":"결제 정보를 찾을 수 없습니다.","data":null,"status":404}}}}}}}}}},"components":{"schemas":{"IssueCouponRequestDto":{"type":"object","properties":{"couponPolicyId":{"type":"integer","format":"int64"}}},"IssuedCouponResponseDto":{"type":"object","properties":{"couponId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"couponPolicyId":{"type":"integer","format":"int64"},"name":{"type":"string"},"discountRate":{"type":"integer","format":"int32"},"issuedAt":{"type":"string","format":"date-time"},"expiredAt":{"type":"string","format":"date-time"},"isUsed":{"type":"boolean"}}},"ResponseApiIssuedCouponResponseDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/IssuedCouponResponseDto"},"status":{"type":"integer","format":"int32"}}},"OrderItemRequestDto":{"type":"object","properties":{"productId":{"type":"integer","format":"int64"},"item_cnt":{"type":"integer","format":"int32"}}},"OrderRequestDto":{"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"items":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemRequestDto"}},"couponId":{"type":"integer","format":"int64"}}},"OrderSummaryResponseDto":{"type":"object","properties":{"orderId":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["CREATED","PAID","COMPLETED","PAYMENT_FAILED"]},"totalAmount":{"type":"integer","format":"int32"}}},"ResponseApiOrderSummaryResponseDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/OrderSummaryResponseDto"},"status":{"type":"integer","format":"int32"}}},"ExternalOrderRequestDto":{"type":"object","properties":{"orderId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"totalAmount":{"type":"integer","format":"int32"},"status":{"type":"string"},"reason":{"type":"string"},"items":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemRequestDto"}}}},"PointUpdateRequestDto":{"type":"object","properties":{"amount":{"type":"integer","format":"int32"}}},"PointBalanceResponseDto":{"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"point":{"type":"integer","format":"int32"}}},"ResponseApiPointBalanceResponseDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/PointBalanceResponseDto"},"status":{"type":"integer","format":"int32"}}},"PointHistoryDto":{"type":"object","properties":{"pointHistoryId":{"type":"integer","format":"int64"},"amount":{"type":"integer","format":"int32"},"type":{"type":"string","enum":["CHARGE","USE"]},"createdDt":{"type":"string","format":"date-time"},"balanceAfter":{"type":"integer","format":"int32"}}},"ResponseApiListPointHistoryDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/PointHistoryDto"}},"status":{"type":"integer","format":"int32"}}},"ResponseApiListUserOrderSummaryDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/UserOrderSummaryDto"}},"status":{"type":"integer","format":"int32"}}},"UserOrderSummaryDto":{"type":"object","properties":{"orderId":{"type":"integer","format":"int64"},"orderedDt":{"type":"string","format":"date-time"},"totalPrice":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["CREATED","PAID","COMPLETED","PAYMENT_FAILED"]}}},"ResponseApiListIssuedCouponResponseDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/IssuedCouponResponseDto"}},"status":{"type":"integer","format":"int32"}}},"CouponAvailableResponseDto":{"type":"object","properties":{"available":{"type":"boolean"},"reason":{"type":"string","enum":["EXPIRED","USED","NOT_OWNED"]},"coupon":{"$ref":"#/components/schemas/IssuedCouponResponseDto"}}},"ResponseApiCouponAvailableResponseDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/CouponAvailableResponseDto"},"status":{"type":"integer","format":"int32"}}},"ProductResponseDto":{"type":"object","properties":{"productId":{"type":"integer","format":"int64"},"name":{"type":"string"},"price":{"type":"integer","format":"int32"},"stock":{"type":"integer","format":"int32"}}},"ResponseApiListProductResponseDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/ProductResponseDto"}},"status":{"type":"integer","format":"int32"}}},"ResponseApiProductResponseDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ProductResponseDto"},"status":{"type":"integer","format":"int32"}}},"PopularProductDto":{"type":"object","properties":{"productId":{"type":"integer","format":"int64"},"totalSold":{"type":"integer","format":"int32"}}},"ResponseApiListPopularProductDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/PopularProductDto"}},"status":{"type":"integer","format":"int32"}}},"OrderDetailDto":{"type":"object","properties":{"orderId":{"type":"integer","format":"int64"},"orderedDt":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["CREATED","PAID","COMPLETED","PAYMENT_FAILED"]},"totalPrice":{"type":"integer","format":"int32"},"couponId":{"type":"integer","format":"int64"},"items":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemDto"}}}},"OrderItemDto":{"type":"object","properties":{"productId":{"type":"integer","format":"int64"},"itemCnt":{"type":"integer","format":"int32"},"unitPrice":{"type":"integer","format":"int32"},"totalPrice":{"type":"integer","format":"int32"}}},"ResponseApiOrderDetailDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/OrderDetailDto"},"status":{"type":"integer","format":"int32"}}},"OrderPaymentDto":{"type":"object","properties":{"orderPaymentId":{"type":"integer","format":"int64"},"couponId":{"type":"integer","format":"int64"},"originalPrice":{"type":"integer","format":"int32"},"discountAmount":{"type":"integer","format":"int32"},"finalPrice":{"type":"integer","format":"int32"},"paidDt":{"type":"string","format":"date-time"}}},"ResponseApiOrderPaymentDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/OrderPaymentDto"},"status":{"type":"integer","format":"int32"}}}}}}