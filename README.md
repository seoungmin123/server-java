# 📦 이커머스 서비스 - 설계

Spring Boot 기반 포인트 충전/사용 기능 및 주문 처리, 선착순 쿠폰 발급이 가능한 시스템입니다,

---

## ✨ 주요 기능 요약 (요구사항/제약사항)

- **포인트 충전/조회/사용**
    - 사용자 포인트를 충전하고 현재 잔액 및 충전/사용 이력을 조회할 수 있습니다.
    - 포인트 사용 시 `Optimistic Lock`을 적용해 중복 차감을 방지합니다.

- **상품 조회**
    - 전체 상품 목록 및 개별 상품 상세 정보를 조회할 수 있습니다.
    - 단일 옵션 상품만 제공하며 페이징은 지원하지 않습니다.

- **쿠폰 발급 및 사용**
    - 선착순으로 쿠폰을 발급받을 수 있으며, 보유 쿠폰 목록과 사용 가능 여부를 확인할 수 있습니다.
    - 쿠폰 중복 발급, 만료, 타인 쿠폰 사용은 제한됩니다.

- **주문 및 결제**
    - 사용자는 여러 상품을 선택하여 주문하고 충전된 포인트로 결제할 수 있습니다.
    - 주문 시 상품 재고를 확인하고 차감하며, `Pessimistic Lock`을 적용해 동시 주문 시 재고 초과 방지를 보장합니다.
    - 쿠폰 적용 시 할인 금액이 반영되며, 외부 데이터 플랫폼으로 주문 내역을 전송합니다 (Mock 처리).

- **주문 조회**
    - 전체 주문 내역 및 단건 주문 상세 정보, 결제 내역을 조회할 수 있습니다.

- **동시성 및 제약사항 처리**
    - 잔액 부족, 재고 부족, 쿠폰 무효 등의 상황에 대한 예외 처리를 포함합니다.
    - 멀티 인스턴스 환경 및 동시 요청에도 일관성 있게 동작하도록 설계되었습니다.


---

## 📚 주요 설계 문서

아래 문서들은 `docs/architecture/` 디렉토리에 위치하고, 기능 정의, ERD, API명세서를 정의하였습니다.

| 번호 | 문서명                                                             | 설명 |
|------|-----------------------------------------------------------------|------|
| 0 | [요구사항 정의](docs/architecture/0.요구사항_정의.md)                         | 전체 기능 항목 및 요구사항 개요 |
| 1 | [API 명세서 요약](docs/architecture/1.API명세서_요약.md)                  | 각 기능의 Endpoint 및 응답 요약 |
| 2 | [API 명세서 상세](docs/architecture/2.API명세서_상세.md)                  | 요청/응답/에러 케이스 포함한 상세 명세 |
| 3 | [ERD](docs/architecture/3-1.ERD.png)                            | 전체 DB 테이블 구조 (이미지) |
| 4 | [도메인 클래스 다이어그램](docs/architecture/4-1.domain-class-diagram.png) | 클래스 다이어그램 |
| 5 | [DDL 스크립트](docs/architecture/5.ddl.sql)                         | 테이블 생성용 SQL 스크립트 |


---

## 🛠 기술 스택

- Java 17
- Spring Boot
- MySQL
- Swagger (Springdoc OpenAPI)
- JUnit5
